{"version":3,"file":"createFetcher.js","sources":["../src/createFetcher.js"],"sourcesContent":["// @flow\n\nimport {observe, send} from \"@absinthe/socket\";\n\nimport type {AbsintheSocket} from \"@absinthe/socket\";\nimport type {FetchFunction} from \"react-relay\";\n\n/**\n * Creates a Fetcher (Relay FetchFunction) using the given AbsintheSocket\n * instance\n */\nconst createFetcher = (\n  absintheSocket: AbsintheSocket,\n  onError?: (error: Error) => any\n): FetchFunction => ({text: operation}, variables) =>\n  new Promise((resolve, reject) =>\n    // $FlowFixMe: operation is always defined\n    observe(absintheSocket, send(absintheSocket, {operation, variables}), {\n      onError,\n      onAbort: reject,\n      onResult: resolve\n    })\n  );\n\nexport default createFetcher;\n"],"names":["createFetcher","absintheSocket","onError","variables","operation","text","Promise","resolve","reject","observe","send","onAbort","onResult"],"mappings":";;;;;;;;;;;AAWA,IAAMA,aAAa,GAAG,uBACpBC,cADoB,EAEpBC,OAFoB;;;;;SAGF,gBAAoBC,SAApB;;;QAAQC,SAAR,QAAEC,IAAF;;;;WAClB,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV;;;;QAEVC,OAAO,CAACR,cAAD,EAAiBS,IAAI,CAACT,cAAD,EAAiB;UAACG,SAAS,EAATA,SAAD;UAAYD,SAAS,EAATA;SAA7B,CAArB,EAA+D;UACpED,OAAO,EAAPA,OADoE;UAEpES,OAAO,EAAEH,MAF2D;UAGpEI,QAAQ,EAAEL;SAHL;;KAFT,YADkB;GAHE;CAAH,gBAAnB;;;;"}